<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Faraday Interface - Accueil</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .nav-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .nav-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
        }

        .nav-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 60px rgba(0,0,0,0.2);
        }

        .nav-card .icon {
            font-size: 3em;
            margin-bottom: 20px;
            display: block;
        }

        .nav-card h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #2d3748;
        }

        .nav-card p {
            color: #718096;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .nav-card .features {
            list-style: none;
            text-align: left;
        }

        .nav-card .features li {
            color: #4facfe;
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }

        .nav-card .features li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: #48bb78;
            font-weight: bold;
        }

        .status-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }

        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .status-item {
            text-align: center;
            padding: 20px;
            border-radius: 15px;
            background: #f8f9fa;
        }

        .status-item .status-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .status-item h4 {
            color: #2d3748;
            margin-bottom: 5px;
        }

        .status-online {
            background: linear-gradient(135deg, #c6f6d5 0%, #a8edea 100%);
            color: #2f855a;
        }

        .status-offline {
            background: linear-gradient(135deg, #fed7d7 0%, #fbb6ce 100%);
            color: #c53030;
        }

        .footer {
            text-align: center;
            color: white;
            opacity: 0.8;
            margin-top: 40px;
        }

        .workspace-primary {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .workspace-primary:hover {
            color: white;
        }

        .workspace-primary .icon,
        .workspace-primary h3,
        .workspace-primary p,
        .workspace-primary .features li {
            color: white;
        }

        .workspace-primary .features li::before {
            color: #a8edea;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .nav-cards {
                grid-template-columns: 1fr;
            }
            
            .status-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ Faraday Interface</h1>
            <p>Interface compl√®te de gestion des donn√©es de s√©curit√©</p>
        </div>

        <div class="status-section">
            <h2 style="text-align: center; margin-bottom: 20px; color: #2d3748;">√âtat des Services</h2>
            <div class="status-grid" id="statusGrid">
                <div class="status-item status-offline">
                    <div class="status-icon">‚ö°</div>
                    <h4>Proxy CORS</h4>
                    <p>V√©rification...</p>
                </div>
                <div class="status-item status-offline">
                    <div class="status-icon">üîí</div>
                    <h4>Faraday Server</h4>
                    <p>V√©rification...</p>
                </div>
                <div class="status-item status-offline">
                    <div class="status-icon">üåê</div>
                    <h4>Interface Web</h4>
                    <p>V√©rification...</p>
                </div>
                <div class="status-item status-offline">
                    <div class="status-icon">üîê</div>
                    <h4>Authentification</h4>
                    <p>V√©rification...</p>
                </div>
            </div>
        </div>

        <div class="nav-cards">
            <a href="workspaces.html" class="nav-card workspace-primary">
                <span class="icon">üè¢</span>
                <h3>Gestion des Workspaces</h3>
                <p>Interface compl√®te pour g√©rer vos espaces de travail</p>
                <ul class="features">
                    <li>Cr√©er, modifier, supprimer des workspaces</li>
                    <li>Visualiser les statistiques en temps r√©el</li>
                    <li>Recherche et filtrage avanc√©s</li>
                    <li>Communication directe avec Faraday</li>
                </ul>
            </a>

            <a href="index.html" class="nav-card">
                <span class="icon">üìä</span>
                <h3>Dashboard Principal</h3>
                <p>Vue d'ensemble de tous vos projets de s√©curit√©</p>
                <ul class="features">
                    <li>Graphiques et analytics</li>
                    <li>Module Graphics int√©gr√©</li>
                    <li>Planificateur de t√¢ches</li>
                    <li>Rapports automatis√©s</li>
                </ul>
            </a>

            <a href="diagnostic-connexion.html" class="nav-card">
                <span class="icon">üîß</span>
                <h3>Diagnostic Syst√®me</h3>
                <p>V√©rification compl√®te de la connectivit√©</p>
                <ul class="features">
                    <li>Test de connectivit√© proxy</li>
                    <li>Validation API Faraday</li>
                    <li>Test d'authentification</li>
                    <li>Logs d√©taill√©s</li>
                </ul>
            </a>

            <a href="api-test.html" class="nav-card">
                <span class="icon">üß™</span>
                <h3>Tests API</h3>
                <p>Interface de test pour l'API Faraday</p>
                <ul class="features">
                    <li>Test des endpoints API</li>
                    <li>Simulation de requ√™tes</li>
                    <li>Validation des r√©ponses</li>
                    <li>Debug interactif</li>
                </ul>
            </a>

            <a href="#" onclick="openHostsManager()" class="nav-card">
                <span class="icon">üñ•Ô∏è</span>
                <h3>Gestion des Hosts</h3>
                <p>Gestion compl√®te des h√¥tes d√©couverts</p>
                <ul class="features">
                    <li>Visualisation des hosts</li>
                    <li>Gestion des services</li>
                    <li>√âdition des propri√©t√©s</li>
                    <li>Export des donn√©es</li>
                </ul>
            </a>

            <a href="#" onclick="openVulnsManager()" class="nav-card">
                <span class="icon">üõ°Ô∏è</span>
                <h3>Vuln√©rabilit√©s</h3>
                <p>Interface de gestion des vuln√©rabilit√©s</p>
                <ul class="features">
                    <li>Catalogue des vuln√©rabilit√©s</li>
                    <li>Filtrage par criticit√©</li>
                    <li>Gestion des corrections</li>
                    <li>Rapports de s√©curit√©</li>
                </ul>
            </a>
        </div>

        <div class="footer">
            <p>üîó Interface connect√©e aux donn√©es r√©elles Faraday</p>
            <p>Version 1.0 - D√©velopp√© pour la gestion avanc√©e des tests de p√©n√©tration</p>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script>
        class StatusChecker {
            constructor() {
                this.api = new FaradayAPI();
                this.checkAllStatus();
                
                // V√©rifier l'√©tat toutes les 30 secondes
                setInterval(() => this.checkAllStatus(), 30000);
            }

            async checkAllStatus() {
                await Promise.all([
                    this.checkProxyStatus(),
                    this.checkFaradayStatus(),
                    this.checkWebStatus(),
                    this.checkAuthStatus()
                ]);
            }

            async checkProxyStatus() {
                const element = document.querySelector('.status-grid .status-item:nth-child(1)');
                try {
                    const response = await fetch('http://localhost:8082/_api/v3/info', {
                        method: 'GET',
                        headers: {
                            'Authorization': 'Basic ' + btoa('faraday:faraday')
                        }
                    });
                    
                    if (response.ok) {
                        this.setStatus(element, true, 'Proxy CORS', 'En ligne');
                    } else {
                        this.setStatus(element, false, 'Proxy CORS', `Erreur ${response.status}`);
                    }
                } catch (error) {
                    this.setStatus(element, false, 'Proxy CORS', 'Hors ligne');
                }
            }

            async checkFaradayStatus() {
                const element = document.querySelector('.status-grid .status-item:nth-child(2)');
                try {
                    // Test via proxy
                    const response = await fetch('http://localhost:8082/_api/v3/info', {
                        method: 'GET',
                        headers: {
                            'Authorization': 'Basic ' + btoa('faraday:faraday')
                        }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        this.setStatus(element, true, 'Faraday Server', `v${data.Version || 'inconnue'}`);
                    } else {
                        this.setStatus(element, false, 'Faraday Server', 'Inaccessible');
                    }
                } catch (error) {
                    this.setStatus(element, false, 'Faraday Server', 'Erreur');
                }
            }

            async checkWebStatus() {
                const element = document.querySelector('.status-grid .status-item:nth-child(3)');
                const isOnPort8888 = window.location.port === '8888';
                this.setStatus(element, isOnPort8888, 'Interface Web', 
                    isOnPort8888 ? 'Port 8888' : `Port ${window.location.port || '80'}`);
            }

            async checkAuthStatus() {
                const element = document.querySelector('.status-grid .status-item:nth-child(4)');
                try {
                    const response = await fetch('http://localhost:8082/_api/v3/info', {
                        method: 'GET',
                        headers: {
                            'Authorization': 'Basic ' + btoa('faraday:faraday')
                        }
                    });
                    
                    this.setStatus(element, response.ok, 'Authentification', 
                        response.ok ? 'Valide' : '√âchec');
                } catch (error) {
                    this.setStatus(element, false, 'Authentification', 'Erreur');
                }
            }

            setStatus(element, isOnline, title, status) {
                element.className = `status-item ${isOnline ? 'status-online' : 'status-offline'}`;
                element.querySelector('h4').textContent = title;
                element.querySelector('p').textContent = status;
                element.querySelector('.status-icon').textContent = isOnline ? '‚úÖ' : '‚ùå';
            }
        }

        // Fonctions de navigation
        function openTestAPI() {
            // Pour l'instant, rediriger vers le diagnostic
            window.open('diagnostic-connexion.html', '_blank');
        }

        function openHostsManager() {
            alert('üöß Module Hosts en cours de d√©veloppement\n\nCette fonctionnalit√© sera bient√¥t disponible.');
        }

        function openVulnsManager() {
            alert('üöß Module Vuln√©rabilit√©s en cours de d√©veloppement\n\nCette fonctionnalit√© sera bient√¥t disponible.');
        }

        // Initialiser le v√©rificateur de statut
        document.addEventListener('DOMContentLoaded', () => {
            new StatusChecker();
        });

        // Messages de bienvenue
        console.log(`
üöÄ FARADAY INTERFACE CHARG√âE

üîó Services disponibles:
   ‚Ä¢ Workspaces: http://localhost:8888/workspaces.html
   ‚Ä¢ Dashboard: http://localhost:8888/index.html
   ‚Ä¢ Diagnostic: http://localhost:8888/diagnostic-connexion.html

‚ö° √âtat de connexion:
   ‚Ä¢ Interface Web: Port ${window.location.port || '80'}
   ‚Ä¢ Proxy CORS: Port 8081
   ‚Ä¢ Faraday API: Port 5985

‚ú® Fonctionnalit√©s:
   ‚Ä¢ Gestion CRUD des workspaces
   ‚Ä¢ Connexion directe aux donn√©es r√©elles
   ‚Ä¢ Interface responsive et moderne
   ‚Ä¢ Diagnostic automatique
        `);
    </script>
</body>
</html>
